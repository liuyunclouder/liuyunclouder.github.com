language: node_js
node_js:
- '0.12'
branches:
  only:
  - source
before_install:
- npm install -g hexo-cli
install:
- npm install
script:
- git submodule init
- git submodule update
- hexo generate
after_success:
- git config --global user.name "liuyunclouder"
- git config --global user.email "liuyunclouder@gmail.com"
- sed -i'' "/^ *repository/s~github\.com~${GH_TOKEN}@github.com~" _config.yml
- hexo deploy
env:
  global:
  - secure: Wd5KSFLM0TSW1oyN2xG2jsOqEtuGjmNpTnnoZvPwdzxc4Y8zJiOtIf4fjU8qyCDnfxBi2k601+bcVlTuFsykvQDhaZ6te4Mkhdp5yDV7jv7nAjoHeNmz+Ldv3F66q2Zb0lBXXF5O2SchLKA7l1hP7tGdXEJP+MuY3aiCDApUMuk=
