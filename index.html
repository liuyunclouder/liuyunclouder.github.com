<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/libs/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/libs/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Ezio's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Ezio's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ezio's Blog">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Ezio's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?a63d6742fa06ccda252c7c1bdc9649d9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Ezio's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">record</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/18/无径之林,常有情趣/" itemprop="url">
                  无径之林,常有情趣
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-03-18T20:00:00+08:00" content="2017-03-18">
              2017-03-18
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/18/无径之林,常有情趣/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/18/无径之林,常有情趣/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>无径之林 常有情趣</p>
<p>无人之岸 几多惊喜</p>
<p>无人驻足 是为桃源</p>
<p>岸畔崖间 鼓涛为乐</p>
<p>吾爱世人 自然甚之</p>
<p>—拜伦</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/11/《Cocoa Design Patterns》阅读笔记/" itemprop="url">
                  《Cocoa Design Patterns》阅读笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-03-11T20:00:00+08:00" content="2017-03-11">
              2017-03-11
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/11/《Cocoa Design Patterns》阅读笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/11/《Cocoa Design Patterns》阅读笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近事情太多了，偷懒把15年的读书笔记发上来充个数。</p>
<h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><h3 id="category用的是哪种设计模式？"><a href="#category用的是哪种设计模式？" class="headerlink" title="category用的是哪种设计模式？"></a>category用的是哪种设计模式？</h3><p>不属于23种设计模式的任何一种，本身就是一种设计模式 </p>
<h3 id="perform-selector用的是哪种设计模式？"><a href="#perform-selector用的是哪种设计模式？" class="headerlink" title="perform selector用的是哪种设计模式？"></a>perform selector用的是哪种设计模式？</h3><p>类似于命令模式，NSInvocation是一种更为完备的命令模式 </p>
<h3 id="bundle用的是哪种设计模式？"><a href="#bundle用的是哪种设计模式？" class="headerlink" title="bundle用的是哪种设计模式？"></a>bundle用的是哪种设计模式？</h3><p>bundle本身就是一种设计模式，类似facade </p>
<h3 id="binding是什么？"><a href="#binding是什么？" class="headerlink" title="binding是什么？"></a>binding是什么？</h3><p> In the C programming language and languages derived from it like Objective-C and C++, compilers and linkers convert explicit function calls in program source code into machine language jumps to code at predetermined fixed addresses in memory.The conversion of code to fixed addresses in sometimes called binding </p>
<p>mac开发中还有一种binding是利用KVO做双向绑定，具体实现原理不清楚，但有类似的ios开源库（Bind），可以研究下 </p>
<h3 id="访问者和命令模式在cocoa的哪些地方有用到？"><a href="#访问者和命令模式在cocoa的哪些地方有用到？" class="headerlink" title="访问者和命令模式在cocoa的哪些地方有用到？"></a>访问者和命令模式在cocoa的哪些地方有用到？</h3><p>NSProxy </p>
<h3 id="装饰者模式在cocoa的哪些地方有用到？"><a href="#装饰者模式在cocoa的哪些地方有用到？" class="headerlink" title="装饰者模式在cocoa的哪些地方有用到？"></a>装饰者模式在cocoa的哪些地方有用到？</h3><p>UIView的子类、category </p>
<h2 id="摘要笔记"><a href="#摘要笔记" class="headerlink" title="摘要笔记"></a>摘要笔记</h2><h3 id="One-Pattern-to-Rule-Them-All"><a href="#One-Pattern-to-Rule-Them-All" class="headerlink" title="One Pattern to Rule Them All"></a>One Pattern to Rule Them All</h3><p>Model View Controller</p>
<h3 id="Fundamental-Patterns"><a href="#Fundamental-Patterns" class="headerlink" title="Fundamental Patterns"></a>Fundamental Patterns</h3><h4 id="two-stage-creation"><a href="#two-stage-creation" class="headerlink" title="two stage creation"></a>two stage creation</h4><p>分离成两个步骤后，有desinated initializer和非desinated initializer，方便创建非desinated initializer </p>
<h4 id="template-method"><a href="#template-method" class="headerlink" title="template method"></a>template method</h4><p>If you find yourself contemplating the creation of Template Methods in code intended for reuse, first consider Delegates. In many cases, Delegates provide a more flexible alter- native to Template Methods. </p>
<h4 id="dynamic-creation"><a href="#dynamic-creation" class="headerlink" title="dynamic creation"></a>dynamic creation</h4><p>One very important aspect of this power is the fact that this function allows a developer to use an object that was unknown to the compiler and linker when the application was built </p>
<h4 id="Heterogeneous-Containers"><a href="#Heterogeneous-Containers" class="headerlink" title="Heterogeneous Containers"></a>Heterogeneous Containers</h4><p>The NSArray and NSMutableArray classes store ordered collections of object refer- ences.The NSDictionary and NSMutableDictionary classes store associations of keys and values for rapid retrieval.The NSSet and NSMutableSet classes store unordered col- lections of unique object references; each object can be referenced at most once in any particular set. Finally, NSCountedSet, a subclass of NSMutableSet, provides an unordered collection, but it allows multiple references to the same object within one collection. </p>
<p>NSOrderedSet NSMutableOrderedSet </p>
<h4 id="Enumerators"><a href="#Enumerators" class="headerlink" title="Enumerators"></a>Enumerators</h4><p>一个通过继承(NSEnumerator)，一个通过协议（NSFastEnumeration） </p>
<h4 id="perform-selector"><a href="#perform-selector" class="headerlink" title="perform selector"></a>perform selector</h4><p>The Invocation pattern and the NSInvocation class provide a more complete implementation of late binding of messages than the simple –performSelector: method. NSInvocation can store messages that have nonobject return types or require complex arguments. </p>
<p>An Action is really just a variable selector, and the target is just an anonymous object </p>
<h4 id="accessor"><a href="#accessor" class="headerlink" title="accessor"></a>accessor</h4><p>Methods like NSData’s -(void)getBytes:(void <em>)aBuffer return values by reference because the number of bytes that will be returned can’t be determined at compile time. Other examples of get methods include NSArray’s -(void)getOb- jects:(id </em>)aBuffer, NSString’s -(void)getCharacters:(unichar <em>)aBuffer, and NSValue’s -(void)getValue:(void </em>)aBuffer. In each case, the size of the value copied into the referenced memory is variable.Another reason for returning values by ref- erence is to enable the return of more than one value from a single method.A good ex- ample of that is NSColor’s -(void)getRed:(CGFloat <em>)red green:(CGFloat </em>)green blue:(CGFloat <em>)blue alpha:(CGFloat </em>)alpha method, which returns four floating point values by reference. </p>
<ul>
<li>(NSString *)title {<br>return _myTitle;<br>}<br>The -title implementation is adequate in most cases, but a more sophisticated tech- nique may be necessary if the application using the title is multithreaded. In a multithreaded<br>application, there is a chance that another thread of execution may alter _myTitle or release it after it has been returned from the -title method but before the code that called -title has had an opportunity to retain the returned object. In that case, _myTitle’s retain count may reach zero, and the object may be deallocated, leaving the code that called -title with a pointer to a deallocated (invalid) object. One solution that supports the multithreaded case is to retain and autorelease the ob- ject being returned as follows: </li>
<li>(NSString *)title {<br>id result;<br>// Lock<br>result = [[_myTitle retain]() autorelease];<br>// Unlock<br>return result];<br>} </li>
</ul>
<h4 id="archiving-and-unarchiving"><a href="#archiving-and-unarchiving" class="headerlink" title="archiving and unarchiving"></a>archiving and unarchiving</h4><p>Conditional Encoding </p>
<h3 id="Patterns-That-Primarily-Empower-by-Decoupling"><a href="#Patterns-That-Primarily-Empower-by-Decoupling" class="headerlink" title="Patterns That Primarily Empower by Decoupling"></a>Patterns That Primarily Empower by Decoupling</h3><h4 id="singleton"><a href="#singleton" class="headerlink" title="singleton"></a>singleton</h4><p>Classes exist to encapsulate information about instances and provide a single inter- face for creating instances. Using an instance of MYGameHighScoreManager to manage scores and using the MYGameHighScoreManager class itself to encapsulate access to the in- stance is the cleanest way to achieve the goals of flexibility and maintainability. </p>
<h4 id="nsnotification"><a href="#nsnotification" class="headerlink" title="nsnotification"></a>nsnotification</h4><p>The object that sends a message to a notification center doesn’t need to know what observers exist or how many observers ultimately receive the notification. Similarly, the observers don’t necessarily need to know where notifications originate </p>
<p>Use the Notification pattern when anonymous objects need to passively observe and react to important events. In contrast, use the Delegates pattern when anonymous objects need to actively influence events as they happen. </p>
<h4 id="delegate"><a href="#delegate" class="headerlink" title="delegate"></a>delegate</h4><p>Delegates simplify the customization of object behavior while minimizing coupling be- tween objects </p>
<h4 id="delegate-vs-subclassing"><a href="#delegate-vs-subclassing" class="headerlink" title="delegate vs subclassing"></a>delegate vs subclassing</h4><p>Subclassing statically establishes the relationship between the subclass and its superclass at compile time. In many cases, runtime flexibility is desired. For example, constraints on the resizing behav- ior of a window might change based on user actions at runtime </p>
<h4 id="datasource"><a href="#datasource" class="headerlink" title="datasource"></a>datasource</h4><p>Data sources are similar to delegates, but they play a different role. Delegates react to changes or control other objects.A data source provides data to another object whenever needed. Delegates are always optional; the object that uses a delegate falls back to default behavior if there is no delegate assigned.An object that uses a data source may not be functional without a valid data source to supply data. For example, Cocoa’s NSTableView class retrieves data as needed from a data source. Using a data source provides several advantages. First and most importantly, using a data source preserves the separation of subsystems in the Model-View-Controller pattern.The graphical table drawing and editing features of NSTableView clearly belong in the View subsystem. Calculation, retrieval, and storage of the data values to be displayed are clearly part of the Model subsystem.The calculations and storage of data remains the same even if the mechanism used to display the data changes.The same Model data could be displayed in a pie chart or output to a file or sent to a printer.The object acting as a data source for an instance of NSTableView is typically part of the Controller subsystem.The data source responds to the NSTableView’s requests for data by retrieving the data from the Model. NSTableView is decoupled from details regarding the retrieval of data from the Model. Similarly, classes in the Model subsystem have no coupling to the View objects that dis- play data. Using a data source has the added advantage of enabling efficient data processing and memory usage. For example, even if a table has a million rows, at most a few dozen rows can be seen on the screen at once. NSTableView only asks its data source for the data needed to display the currently visible rows. If the Model subsystem needs to calculate the data or the data must be fetched over a network from a database, there is no need to cal- culate or fetch a million rows of data at once. Like a delegate, the data source object is not retained by the object that uses it. A single object acting as a data source may provide data to any number of objects.Apple identifies the messages that will be sent to a data source in the class documentation for the classes that require a data source. Just like delegate methods, there is typically an informal proto- col that declares the methods a data source must implement. </p>
<h4 id="outlets-target-action"><a href="#outlets-target-action" class="headerlink" title="outlets target action"></a>outlets target action</h4><p>Any instance variable with type id and a name that doesn’t start with an underscore character is automatically considered an outlet. In addi- tion, any instance variable that is a pointer to an object and includes the IBOutlet macro in its declaration is treated as an outlet. </p>
<p>The IBOutlet macro is defined in NSNibDeclarations.h, which is part of Cocoa’s Application Kit framework, and the C preprocessor replaces it with a single space charac- ter whenever it’s encountered in source code. IBOutlet doesn’t change the meaning of compiled code at all. It is just a hint to Interface Builder that identifies outlets with types more specific than id.When a specific type is declared, Interface Builder will respect it and use that information to limit what types of objects may be connected to that outlet. </p>
<p>The IBAction type is actually a preprocessor macro that evaluates to the void type. </p>
<h4 id="MVC之间的耦合"><a href="#MVC之间的耦合" class="headerlink" title="MVC之间的耦合"></a>MVC之间的耦合</h4><p>With regard to coupling, the MYPlayerController class knows about the MYSongPlayer object in the Model and is therefore coupled to the Model, but the Model knows nothing about the Controller subsystem.The MYPlayerController instance also has outlets that are con- nected toView objects.The Controller is slightly coupled to theView but knows very lit- tle about theView objects with which it communicates.TheView has no dependence on the Controller.The buttons and slider have targets defined with type id, which means they could be connected to any objects that respond to the assigned action messages. </p>
<h4 id="MVC信息流"><a href="#MVC信息流" class="headerlink" title="MVC信息流"></a>MVC信息流</h4><p>￼<img src="http://d.pr/i/D02C+" alt=""></p>
<h4 id="responder-chain"><a href="#responder-chain" class="headerlink" title="responder chain"></a>responder chain</h4><p>As a user works with an application, Cocoa automatically tracks where the user’s focus is.The window currently receiving keyboard input is known as the “key” window.The currently focused document is known as the “main” window. Usually a user is working directly in the document, so the key and main windows are the same. Sometimes the user’s focus is actually on two windows, however. For example, in a multidocument appli- cation with utility panels, the user might be focused on a particular document while entering something into a utility panel.The input to the utility panel is expected to mod- ify the focused document in some way. In this case, the utility panel would be the key window, while the document it affects is the main window </p>
<p>Incoming keyboard and mouse events are converted to NSEvent objects by the NSApplication object and then dispatched to the correct responder object by passing them down a Responder Chain. For a keyboard events and mouse moved events, the first responder of the key window is the head of the chain. For mouse clicks, the most deeply nested view directly under the mouse is the head. If a responder doesn’t want to handle the event, then it will pass the event on to the next responder in the chain until either an object handles the event or the event reaches the end of the chain. </p>
<ol>
<li>Start with the first responder of the key window. </li>
<li>Follow the Responder Chain up the view hierarchy. </li>
<li>Try the window object. </li>
<li>Try the window’s delegate,which is often an NSDocument instance. </li>
<li>Next is an NSWindowController instance,if there is one. </li>
<li>Repeat 1-5 starting with the first responder of the main window. </li>
<li>Try the NSApplication object and its delegate. </li>
<li>Try the NSDocumentController,ifthereisone. </li>
</ol>
<h4 id="Associative-Storage"><a href="#Associative-Storage" class="headerlink" title="Associative Storage"></a>Associative Storage</h4><p>In addition to conforming to the NSCopying protocol, objects used as keys in a dictionary must implement the -isEqual: and -hash methods so that any two objects that are considered equal by the -isEqual: method also have the same hash value.The -isEqual: and -hash methods are declared in the NSObject class, which provides basic implementations using the addresses of objects. In other words, two objects are equal if they have the same address, and the -hash value is computed from the address. </p>
<p>The key value system allows pro- grams to interact with objects as if every object is a dictionary that associates its properties with string keys</p>
<p>KeyValue Coding provides a way for scripting languages to access the values stored in objects at runtime based on the string name of the value. Perhaps more importantly, Key Value Coding is the foundation for Cocoa bindings technology. Key Value Coding applies the Associative Storage pattern to every Cocoa object so that object instance variables or accessors are selected at runtime via string keys. </p>
<p>KVC/KVO is a variation of the Associative Storage pattern, which lets you access the properties of ob- jects as if every object were a simple dictionary of key/value pairs </p>
<h4 id="invocation"><a href="#invocation" class="headerlink" title="invocation"></a>invocation</h4><p>One point of confusion for many developers is in how messages are named. Each name has two parts, the selector and the method signature. Both parts are required to properly configure NSInvocation objects. A selector is the message’s name without any type infor- mation, for example “countOfObjectsOfType:” is a selector. Objective-C also has the data type SEL, which is a unique identifier representing a selector.The Objective-C direc- tive @selector() can be used to obtain a SEL. </p>
<p>Most programmers consider the selector to be the same thing as the message name, and in most cases this is fine. However, selectors do not provide any type information. To build a complete message, the types of each argument and the return value’s type need to be known.This type information is known as a method signature.The class NSMethodSignature encapsulates this information </p>
<p>Invocations package up an Objective-C method so that it can be handled as if it were an object </p>
<ul>
<li>(id)tellPerson:(id)person<br>{ </li>
</ul>
<p>} </p>
<p>selector(用sel表示)<br>tellPerson:   @selector(tellPerson:) </p>
<p>method signature (用NSMethodSignature表示)<br>id id </p>
<h4 id="invocation创建及执行流程"><a href="#invocation创建及执行流程" class="headerlink" title="invocation创建及执行流程"></a>invocation创建及执行流程</h4><pre><code>NSString *receivingString = [receiver stringValue];  
NSString *messageString = [message titleOfSelectedItem];  
SEL selector = NSSelectorFromString(messageString);  
NSMethodSignature *methodSignature = [receivingString methodSignatureForSelector:selector];  
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:methodSignature]; 

[invocation setTarget:receivingString]; // argument 0 is &quot;self&quot;  
[invocation setSelector:selector]; // argument 1 is &quot;_cmd&quot; 

int numberOfArguments = [[message selectedItem] tag];  
if (numberOfArguments &gt; 0) 
{ 
NSString *argumentString1 = [argument1 stringValue];  
[invocation setArgument:&amp;argumentString1 atIndex:2];  
if (numberOfArguments &gt; 1) 
{ 
NSString *argumentString2 = [argument2 stringValue]; 
[invocation setArgument:&amp;argumentString2 atIndex:3];  
} 
} 


[invocation invoke]; 
void *returnValue = NULL; 
[invocation getReturnValue:&amp;returnValue]; 
const char *returnType = [methodSignature methodReturnType]; 
if (returnType) { 
switch (returnType[0]) { 
case ‘@&apos;: 
[result setObjectValue:(id)returnValue]; break; 
case ‘i&apos;: 
[result setIntValue:(int)returnValue]; break; 
default: break; 
}  
} 
</code></pre><h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><p>The most essential feature of prototype objects is that they can be copied </p>
<h4 id="flyweight"><a href="#flyweight" class="headerlink" title="flyweight"></a>flyweight</h4><p>There may be a lot of NSNumber instances in use at any one time in a Cocoa program. Cocoa optimizes storage for NSNumber instances by sharing them. Each time you call <a href="">NSNumber numberWithInt:0</a>;, you are likely to get the same instance returned. Cocoa keeps a cache of recently or frequently used NSNumber instances.When you ask for a new NSNumber that stores the same value as a cached instance, the cached instance is returned instead of a new instance </p>
<h3 id="Patterns-That-Primarily-Hide-Complexity"><a href="#Patterns-That-Primarily-Hide-Complexity" class="headerlink" title="Patterns That Primarily Hide Complexity"></a>Patterns That Primarily Hide Complexity</h3><p>The patterns in Part IV hide complexity and implementation details so programmers can focus on solving problems.<br>编程是为了解决问题，不要被技术细节困住，专注于解决问题 </p>
<h4 id="bundle"><a href="#bundle" class="headerlink" title="bundle"></a>bundle</h4><p>iOS<br>￼<img src="http://d.pr/i/dhUo+" alt=""></p>
<p>Mac OS<br>￼<img src="http://d.pr/i/fxWl+" alt=""></p>
<p>class cluster<br>￼<img src="http://d.pr/i/BpyW+" alt=""></p>
<p>多例模式：可以用这个模式设计内存池</p>
<h4 id="facade"><a href="#facade" class="headerlink" title="facade"></a>facade</h4><p>The philosophy is to keep common interaction simple while making complex interaction possible </p>
<h4 id="proxy-and-forwarding"><a href="#proxy-and-forwarding" class="headerlink" title="proxy and forwarding"></a>proxy and forwarding</h4><p>The Proxy pattern allows messages to be sent to an object that is separated from the mes- sage’s sender by time or space. Proxies can also control access to or alter the behavior of other objects. Forwarding simplifies the capture of messages as invocations so that they can be resent, delayed, repeated, stored, or altered. </p>
<h4 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h4><p>A proxy can simulate a category with instance variables by defining its own variables and methods and then forwarding everything else to the real object. </p>
<p>Furthermore, when a category overrides an object’s existing methods, it has no easy way to access the original method, but a proxy can.<br>给个例子啊。。。 </p>
<p>Proxies are also able to simulate multiple inheritance by for- warding messages to multiple other objects, creating a form of composite object. </p>
<h4 id="manager"><a href="#manager" class="headerlink" title="manager"></a>manager</h4><p>The Manager pattern is a hybrid and a generalization of other patterns such as Singleton, Façade, and Controllers. </p>
<p>In custom code, a manager should be used when a class is needed for managing instances of other classes, especially when uniqueness is required. </p>
<h4 id="Core-Data"><a href="#Core-Data" class="headerlink" title="Core Data"></a>Core Data</h4><p>￼<img src="http://d.pr/i/VpQF+" alt=""></p>
<h4 id="Application-Kit-Views"><a href="#Application-Kit-Views" class="headerlink" title="Application Kit Views"></a>Application Kit Views</h4><p><img src="http://d.pr/i/Odey+" alt="">￼</p>
<p>When input data becomes available, the run loop translates the data into events and sends Objective-C messages to various objects to process the events. </p>
<p>The key window receives key- board events.The main window is the window that is affected by actions in the key win- dow.The key window and the main window are usually the same, but in some cases they might be different </p>
<p>The first view to receive an event-processing message depends on the type of the event.The first mouse-down event within a window that is not the key window is usually consumed by the window itself to make the window into the key window and bring it to the front.This behavior can be modified in several ways. For example, a subclass of NSView can override the - (BOOL)acceptsFirstMouse:(NSEvent *)theEvent method to return YES based on the mouse event. Returning YES means that the view is able to use the first mouse click in an inactive window. NSWindow sends mouse-down and mouse-move event messages to the top-most view under the mouse. Subviews are drawn after their superview.The top-most view under the mouse is therefore usually the most deeply nested view under the mouse. Mouse-move events occur frequently and are seldom used. NSWindow does not send mouse move event messages to views by default. If a subclass of NSView needs to receive mouse-move events, it must tell NSWindow to send them. NSWindow’s -(void)setAcceptsMouseMovedEvents: (BOOL)acceptMouseMovedEvents method is used to tell the window to send mouse- move event messages to views. Mouse-drag and mouse-up event messages are sent to the view that received the corresponding mouse-down event. Keyboard event messages are sent to the first responder within the window.The NSView class implements the - (BOOL)acceptsFirstResponder method to always return NO. As a result, most views never become the first responder within a window. </p>
<p>Objective-C mes- sages that have one object argument are called actions </p>
<p>The role of the shared NSApplication object in the target-action implementation is important. If the target of a user interface element is specified, the shared application ob- ject just sends the action message to the target directly. However, if no target is specified (the to: argument is nil), -sendAction:to:from: uses the Responder Chain to select the object that receives the action message. Setting the target of a user interface element to nil makes the target context-sensitive. If the to: argument to -sendAction:to:from: is nil, NSApplication searches the Responder Chain for an object that can respond to the action message.The search begins with the first responder in the key window. If the first responder can’t respond to the ac- tion message, the next responder is checked and so on until the key window itself is reached. After the key window gets a chance, the key window’s delegate is checked. If the key window’s delegate can’t respond to the action message, and the main window is dif- ferent from the key window, the first responder in the main window is checked.The search for an object that responds to the action continues up the main window’s Respon- der Chain to the main window itself and then the main window’s delegate. If no target has been found, the application object is tried. Finally, if the application object can’t re- spond to the action, the application object’s delegate is given a chance </p>
<h4 id="binding-and-controller"><a href="#binding-and-controller" class="headerlink" title="binding and controller"></a>binding and controller</h4><p>Inside NSObject’s default implementation of the NSKeyValueObserving informal pro- tocol, -willChangeValueForKey: and -didChangeValueForKey: are implemented to send messages to registered observers before and after the property value changes. </p>
<p>It’s not necessary to explicitly call -willChangeValueForKey: and -didChangeValueForKey: within correctly named Accessor methods.When you use Objective-C 2.0’s @synthesize directive to generate Accessor method implementations, the details are handled for you. Even if you hand-write Accessor methods, Cocoa provides auto- matic support for KeyValue Observing through a little bit of Objective-C runtime manipu- lation briefly described at <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/" target="_blank" rel="external">http://developer.apple.com/documentation/Cocoa/Conceptual/</a> KeyValueObserving/Concepts/KVOImplementation.html.At runtime,Cocoa is able to replace your implementation of each Accessor method with a version that first calls -willChangeValueForKey:, then calls your implementation, and finally calls -didChangeValueForKey:. When Key Value Coding’s -(void)setValue:(id)value forKey:(NSString <em>)key or -(void)setValue:(id)value forKeyPath:(NSString </em>)keyPath methods are used to modify an observed property, the appropriate Accessor methods (if any) are called, and the Accessor methods take care of calling -willChangeValueForKey: and -did- ChangeValueForKey:. If there aren’t any available Accessor methods, -setValue:forKey: and -setValue:forKeyPath: call -willChangeValueForKey: and -didChangeValueForKey: directly. In summary, you only need to explicitly call -willChangeValueForKey: and -didChangeValueForKey: if you change the value of an observed property without using Key Value Coding and without using an appropriately named Accessor method. </p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/04/移动端数据埋点/" itemprop="url">
                  移动端数据埋点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-03-04T20:00:00+08:00" content="2017-03-04">
              2017-03-04
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/04/移动端数据埋点/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/04/移动端数据埋点/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://d.pr/i/Quml+" alt=""></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/25/redis基本使用/" itemprop="url">
                  redis基本使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-02-25T20:00:00+08:00" content="2017-02-25">
              2017-02-25
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/25/redis基本使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/25/redis基本使用/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><pre><code>brew install redis 
</code></pre><h4 id="启动redis"><a href="#启动redis" class="headerlink" title="启动redis"></a>启动redis</h4><pre><code>redis-server 
</code></pre><h4 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h4><pre><code>brew services start redis
</code></pre><h4 id="连接本地redis"><a href="#连接本地redis" class="headerlink" title="连接本地redis"></a>连接本地redis</h4><pre><code>redis-cli 
</code></pre><h4 id="连接远程redis"><a href="#连接远程redis" class="headerlink" title="连接远程redis"></a>连接远程redis</h4><pre><code>redis-cli -h {redis_host} -p {redis_port}
</code></pre><h4 id="获取redis所有db的统计数据"><a href="#获取redis所有db的统计数据" class="headerlink" title="获取redis所有db的统计数据"></a>获取redis所有db的统计数据</h4><pre><code>info keyspace 
</code></pre><h4 id="进入db"><a href="#进入db" class="headerlink" title="进入db"></a>进入db</h4><pre><code>select 2 
</code></pre><h4 id="获取当前db所有key"><a href="#获取当前db所有key" class="headerlink" title="获取当前db所有key"></a>获取当前db所有key</h4><pre><code>keys * 
</code></pre><h4 id="设置和获取"><a href="#设置和获取" class="headerlink" title="设置和获取"></a>设置和获取</h4><pre><code>set varname value1 
get varname 
</code></pre><h4 id="清空"><a href="#清空" class="headerlink" title="清空"></a>清空</h4><pre><code>flushdb // 清除当前数据库的所有keys
flushall // 清除所有数据库的所有keys 
</code></pre><h2 id="导图"><a href="#导图" class="headerlink" title="导图"></a>导图</h2><p><img src="http://d.pr/i/Wgr3+" alt=""></p>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="http://www.redis.cn/documentation.html" target="_blank" rel="external">http://www.redis.cn/documentation.html</a></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/18/读完《软技能》，妈妈再也不用担心35岁后的我被开除了/" itemprop="url">
                  读完《软技能》，妈妈再也不用担心35岁后的我被开除了
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-02-18T20:00:00+08:00" content="2017-02-18">
              2017-02-18
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/18/读完《软技能》，妈妈再也不用担心35岁后的我被开除了/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/18/读完《软技能》，妈妈再也不用担心35岁后的我被开除了/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>工作几年的你是否时不时地经历过职业困惑？你有自己的职业目标么？这个目标意味着的生活方式是你想要的么？作为程序员，你的生活是不是注定就这样每天coding？日复一日的工作是否让你觉得枯燥么？经历过所谓的burn out么？</p>
<p>反正对于工作了好几年的我来说，这些疑问都或多或少，或长或短地在我心底闪现。作为号称“对程序员的全方位关怀”，这本《软技能》很好地回答了这些问题，并给出了一些可行的方法。</p>
<h2 id="说的啥"><a href="#说的啥" class="headerlink" title="说的啥"></a>说的啥</h2><blockquote>
<p>“Few software developers actively manage their careers. But the most successful developers don’t arrive at success by chance. They have a goal in mind and they create a solid and well-thought-out plan to achieve that goal. If you really want to succeed in the competitive world of software development, you need to do more than just polish your resume and take whatever job you happen to get. You need to think things through and decide what actions you should take, when you should take them, and how you should go forward with them.”</p>
</blockquote>
<p>整本书开头就把“干货”亮出来了，总结下来其实就是：要想变牛逼，这样做</p>
<ol>
<li>think through</li>
<li>decide</li>
<li>plan</li>
<li>do it the right way</li>
</ol>
<h3 id="think-through"><a href="#think-through" class="headerlink" title="think through"></a>think through</h3><p><img src="http://d.pr/i/FVZj+" alt=""></p>
<p>《杀妻总动员》里有一句经典的台词：What’s your function in life?我一直印象很深刻。Vinnie Jones对没一个人都会问一个这样的问题，如果没有回答好，就直接被干掉。</p>
<p>电影是无厘头的，但这句话其实细想还是挺有意义的。</p>
<p>你在这个世界上的作用是什么？</p>
<p>虽然回答不出来也不至于一命呜呼，但总是让你反思你在这个世界的位置。</p>
<p>当然，我们不是哲学家，不用去想“我是谁？我从哪里来？我要到哪里去？”这类终极问题，但想清楚哪些是自己想做的和能做的，我们才能选择自己该做的。这样，当我们成功时我们才能更深刻地品尝成功的滋味。</p>
<h3 id="decide"><a href="#decide" class="headerlink" title="decide"></a>decide</h3><p>抉择。</p>
<p>就程序员来说，一般的出路有：</p>
<ul>
<li>上班族</li>
<li>咨询</li>
<li>自由工作</li>
<li>创业</li>
</ul>
<p>每条路都有利有弊，没有一个对任何人都是最好的选项。</p>
<p>作者鼓励我们在做选择时，首先想象你现在是一个铁匠，拥有铸造的技能，并思考以下问题的答案：<br>自己可以提供的服务/价值是什么？<br>如何提升这项服务的价值？<br>如何针对特定用户/领域提供更专业的服务？<br>专注在为特定用户/领域提供某方面的专业服务</p>
<p>思考这些问题能让我们反思自己的长处以及如何利用我们的长处创造价值，这间接地决定着我们的职业目标。</p>
<p>然后，想象你理想的生活方式 。铁匠心态代表的是你能做的，现在是想好你想做的。只有你真正想要的你才会真正地投入，才有机会有所收获。</p>
<p>弄清楚每个选项的得失，选择一个对你来说能接受的最好的选项，赶紧出发吧。</p>
<h3 id="plan"><a href="#plan" class="headerlink" title="plan"></a>plan</h3><p>结构化的规划 ＝ 内容管理 ＋ 时间管理 ＋ 精力管理 ＋ 自我催眠。</p>
<h4 id="内容管理"><a href="#内容管理" class="headerlink" title="内容管理"></a>内容管理</h4><p>做哪方面的规划？本书的副标题是：程序员的生活指南，因此不仅仅是技术层面，反而，我觉得整本书并没有特别针对程序员，任何一个普通人都能从中有一定收获。</p>
<p>作者的规划集中在这几个方面：</p>
<ul>
<li>打造个人影响力和品牌</li>
<li>高效地学习新技能</li>
<li>提升工作效率</li>
<li>理财</li>
<li>健身</li>
<li>拥有积极心态和坚定信念</li>
</ul>
<h4 id="时间管理"><a href="#时间管理" class="headerlink" title="时间管理"></a>时间管理</h4><p>关于时间管理，我同意作者的说法，其实的确是没有一个最好的方案。</p>
<p>和作者一样，我也尝试过几种主流的时间管理方案，番茄时钟、GTD等，都没有很好地坚持下来。经过作者的解释，我才明白我没坚持下来的原因。其实并不是方法本身不好，而是我们没有理解这套机制的原理和本质。</p>
<p>番茄时钟并不是用规定的25分钟强硬地划分你的专注力－－你可以在到达25分钟后跳过休息只接进行下一个时钟－－它的本意是用时钟数来度量你的注意力，通过这种正向反馈鼓励你并培养你延长注意力的能力。同时，也能消除你的一些无谓的罪恶感，让你在应该休息的时候可以安心地休息。</p>
<p>作者推荐kanban＋番茄时钟的方法：<a href="https://kanbanflow.com" target="_blank" rel="external">https://kanbanflow.com </a></p>
<h4 id="精力管理"><a href="#精力管理" class="headerlink" title="精力管理"></a>精力管理</h4><p>健身，这个都不用多强调了，身边的同事、朋友都在健身，而我坚持跑步几个月下来，感觉无论是工作效率还是业余生活，都有足够的精力去完成想要做的事。同时:<br>减少心脏病概率<br>更自信，更好的人际关系<br>保持健康，延长寿命<br>心智更积极，更有创意<br>外形更有魅力 </p>
<p>冥想，也是一种在短时间内快速恢复精力的好办法，和平时说的“深吸一口气”有异曲同工的效果，在家办公的时候倒是坚持了一个月，现在上班了就冥想地少了。</p>
<h4 id="自我催眠"><a href="#自我催眠" class="headerlink" title="自我催眠"></a>自我催眠</h4><p>我们的思维方式、观念、信念影响着我们如何看待这个世界，从而影响我们如何与这个世界相处</p>
<p>自我催眠，其实就是主动保持一种心态信念。</p>
<p>领导者都很注重“企业使命”等“洗脑”工作，其实就是这个道理，要去做一件事，首先你得相信这事能成，有了这个积极的心态和必胜的信念，然后为之拼尽全力，这事才能成功。</p>
<blockquote>
<p>Your beliefs become your thoughts,<br>Your thoughts become your words,<br>Your words become your actions,<br>Your actions become your habits,<br>Your habits become your values,<br>Your values become your destiny.<br>–Mahatma Gandhi </p>
</blockquote>
<h3 id="do-it-the-right-way"><a href="#do-it-the-right-way" class="headerlink" title="do it the right way"></a>do it the right way</h3><h4 id="学习十步法"><a href="#学习十步法" class="headerlink" title="学习十步法"></a>学习十步法</h4><p>1.了解大概说的内容（简介和目录，从宏观上拆分新事物）<br>2.确定想要学习的内容范围（根据学习目的和可用时间来减小范围，专注于学习需要的内容）<br>3.定义学习成功的具体可衡量标准<br>4.收集高质量的学习资料和辅助工具：<br>书籍<br>练习环境：编码环境、乐器<br>博客<br>视频<br>专业人士<br>播客<br>源码和示例工程<br>文档<br>5.制定学习计划（参考收集的资料，选择学习优先级和顺序）<br>6.筛选学习资料<br>7.学到能实践就行<br>8.尝试实践，并收集问题<br>9.带着问题继续学习，专注于解决刚才收集的问题<br>10.整理学习成果并尝试用易懂的方式教会他人（聊天、博客、视频教程、分享、回答论坛问题） </p>
<p>不过，我觉得，是否使用10步学习法取决于书的类型，如果是学习某门编程语言，这种方法是不错；但如果是学习某种基本原理，很大程度上我们都只是需要了解大致情况，并不需要匆忙实践</p>
<h4 id="养成良好的习惯"><a href="#养成良好的习惯" class="headerlink" title="养成良好的习惯"></a>养成良好的习惯</h4><p>提升效率</p>
<p>保持动力</p>
<p>对合适的事情使用并发</p>
<p>争取应得的薪资</p>
<p>找到好的导师</p>
<p>投资首先考虑是否能为自己带来稳定的被动收入</p>
<p>正确的恋爱方法</p>
<p>阅读推荐的书籍</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>某一技术领域的书籍会告诉你如何实现具体的功能，优秀的技术架构的书籍能引导你从宏观角度去设计一个产品，而这本书就是从宏观的角度去引导你设计自己的人生。</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/11/Core Foundation 与 Cocoa类型转换/" itemprop="url">
                  Core Foundation 与 Cocoa类型转换
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-02-11T20:00:00+08:00" content="2017-02-11">
              2017-02-11
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/11/Core Foundation 与 Cocoa类型转换/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/11/Core Foundation 与 Cocoa类型转换/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>__bridge  //不涉及引用计数，用于不赋值或者不作为返回值时</p>
<pre><code>CFArrayGetcount((__bridge CFArrayRef) nsArray); 
</code></pre><p>__bridge_transfer //把 Core Foundation类型转换为 Cocoa 类型</p>
<pre><code>//减少cfString的计数，把所有权交给ARC 
NSString *nsString = (__bridge_transfer id)cfString; 
或者
NSString *nsString = CFBridgingRelease(cfString);
</code></pre><p>__bridge_retained //把 Cocoa 类型转换为  Core Foundation类型</p>
<pre><code>//增加nsString的计数，把所有权交给Core Foundation，PS：别忘了使用后CFRelease
CFStringRef cfString = (__bridge_retained CFTypeRef)nsString;  
或者
CFStringRef cfString = CFBridgingRetain(nsString); 
</code></pre><p>以上规则的前提是我们拥有这个对象的ownership，否则，我们最好别转移所有权。比如： </p>
<pre><code>NSMutableDictionary *keyAnimationDict = (__bridge id)CFDictionaryGetValue(_dict, (__bridge void *)obj); 
</code></pre>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/04/LLDB命令及扩展/" itemprop="url">
                  LLDB命令及扩展
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-02-04T20:00:00+08:00" content="2017-02-04">
              2017-02-04
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/04/LLDB命令及扩展/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/04/LLDB命令及扩展/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="br命令：设置各种类型断点"><a href="#br命令：设置各种类型断点" class="headerlink" title="br命令：设置各种类型断点"></a>br命令：设置各种类型断点</h3><p>列出断点列表</p>
<pre><code>br l
</code></pre><p>删除断点(2是断点id)</p>
<pre><code>br delete 2
</code></pre><p>enable断点</p>
<pre><code>br e 2
</code></pre><p>disable断点</p>
<pre><code>br di 2
</code></pre><p>设置断点(30是行数)</p>
<pre><code>b ViewController.m:30
</code></pre><p>设置symbolic断点</p>
<pre><code>br set -n viewDidLoad
</code></pre><p>设置条件断点</p>
<pre><code>br mod -c &quot;totalValue &gt; 3000&quot; 2
</code></pre><p>删除条件断点</p>
<pre><code>br mod -c &quot;&quot; 2
</code></pre><p>在某一个断点处执行多个命令</p>
<pre><code>br com add 2
&gt; bt
&gt; continue
&gt; DONE
</code></pre><p>继续执行</p>
<pre><code>continue
c
</code></pre><p>单步执行</p>
<pre><code>n
</code></pre><p>单步进入</p>
<pre><code>s
</code></pre><p>退出当前函数</p>
<pre><code>finish
</code></pre><h3 id="expr命令：可以不用修改代码即可以在程序运行时修改程序数据和行为"><a href="#expr命令：可以不用修改代码即可以在程序运行时修改程序数据和行为" class="headerlink" title="expr命令：可以不用修改代码即可以在程序运行时修改程序数据和行为"></a>expr命令：可以不用修改代码即可以在程序运行时修改程序数据和行为</h3><pre><code>expo self.view.hidden = YES
expr -L — 5+5
expr (void)NSLog(@“hello world&quot;)
expr -- (CGRect)[self.view frame]

expr int $debugVar = 5
expr NSString *$debugString = @&quot;ezio cham&quot;

expr NSData *$data = [$jsonString dataUsingEncoding: 4] //lldb不认识enum，需要传具体的值
</code></pre><h3 id="backtrace命令"><a href="#backtrace命令" class="headerlink" title="backtrace命令"></a>backtrace命令</h3><pre><code>bt

bt all
</code></pre><h3 id="thread命令：在排查多线程问题时会用到"><a href="#thread命令：在排查多线程问题时会用到" class="headerlink" title="thread命令：在排查多线程问题时会用到"></a>thread命令：在排查多线程问题时会用到</h3><pre><code>thread backtrace

thread backtrace all
</code></pre><p>显示thread列表</p>
<pre><code>thread list
</code></pre><p>选择id为1的thread</p>
<pre><code>thread select 1
</code></pre><p>使用thread命令完成断点功能（100是行号）</p>
<pre><code>thread until 100
</code></pre><p>修改方法返回值（在代码中的return语句所在行执行）</p>
<pre><code>thread return @&quot;new result&quot;
</code></pre><p>example:</p>
<pre><code>thread until 63（63行是当前方法的return语句所在行）
thread return YES
</code></pre><h3 id="frame命令"><a href="#frame命令" class="headerlink" title="frame命令"></a>frame命令</h3><p>查看当前frame的变量列表</p>
<pre><code>frame variable
</code></pre><p>查看当前frame 名为varName的变量的值</p>
<pre><code>frame variable varName

frame info
</code></pre><p>选择id为2的frame</p>
<pre><code>frame select 2
</code></pre><p>选择当前frame的下一个frame</p>
<pre><code>frame select -relative -1
</code></pre><h3 id="watchpoint"><a href="#watchpoint" class="headerlink" title="watchpoint"></a>watchpoint</h3><p>查看当前watchpoint列表</p>
<pre><code>watchpoint list


watchpoint delete 1


watchpoint set variable varName
</code></pre><p>可以watch expression（my_pointer为expression的返回值）</p>
<pre><code>watchpoint set expression — my_pointer
</code></pre><p>设置watchpoint的条件</p>
<pre><code>watchpoint modify -c “_x &gt; 0” 1
</code></pre><p>删除条件</p>
<pre><code>watchpoint modify -c “” 1
</code></pre><h3 id="script命令"><a href="#script命令" class="headerlink" title="script命令"></a>script命令</h3><p>查看lldb使用的python版本</p>
<pre><code>script print(sys.version)
</code></pre><p>进入lldb的python环境</p>
<pre><code>script
</code></pre><p>使用python脚本</p>
<pre><code>breakpoint command add -s python 1
</code></pre><p>使用python 函数my_script.breakpoint_func</p>
<pre><code>breakpoint command add -F my_script.breakpoint_func 1
</code></pre><h3 id="command命令"><a href="#command命令" class="headerlink" title="command命令"></a>command命令</h3><p>引入python脚本并指定新command命令:cmd_name</p>
<pre><code>command script import “~/my_script.py&quot;
command script add -f my_script.python_function cmd_name
</code></pre><p>引入python脚本并设置在断点中使用</p>
<pre><code>command script import “~/my_script.py&quot;
breakpoint command add -F my_script.breakpoint_func 1
</code></pre><p>引入其他lldb script</p>
<pre><code>command script import “~/my_script.txt&quot;
</code></pre><p>删除命令pf</p>
<pre><code>command unalias pf
</code></pre><p>显示命令历史列表（report navigator中有更详细的内容）</p>
<pre><code>command list
</code></pre><h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><p>获取当前所有alias </p>
<pre><code>help -a 
</code></pre><p>获取和关键字相关的alias </p>
<pre><code>apropos break 
</code></pre><p>设置positional alias </p>
<pre><code>command alias sbr breakpoint set -l %1 

command alias pf expr (CGRect)[self.view frame] 
</code></pre><p>设置regular alias </p>
<pre><code>command regex sbr ’s/(\[0-9\]+)/breakpoint set -l %1&apos; 

command regex pf 
s/(.+)/expr (CGRect)[%1 frame]/ 
s/^$/expr (CGRect)[self.view frame]/ 
</code></pre><p>持久化alias<br>创建~/.lldbinit文件 ,添加以下内容： </p>
<pre><code>command regex pf ‘s/(.+)/expr (CGRect)[%1 frame]/’ ‘s/^$/expr (CGRect)[self.view frame]/’ 
</code></pre><h3 id="custom-summary"><a href="#custom-summary" class="headerlink" title="custom summary"></a>custom summary</h3><pre><code>type summary add CGRect -s &quot;width = ${var.size.width}, height = ${var.size.height}&quot; 
</code></pre><p>为SavingsAccount设置summary </p>
<pre><code>command script import ~/account.py 
type summary add -F account.count_summary SavingsAccount 
</code></pre><p>删除 </p>
<pre><code>type summary delete CGRect 
</code></pre><p>过滤，只显示firstName属性 </p>
<pre><code>type filter add SavingsAccount —child _firstName 
</code></pre><p>改变显示格式 </p>
<pre><code>typedef int hex_month 
type format add —format hex hex_month 
</code></pre><h3 id="quicklook"><a href="#quicklook" class="headerlink" title="quicklook"></a>quicklook</h3><p>quicklook in lldb<br><a href="https://github.com/ryanolsonk/LLDB-QuickLook" target="_blank" rel="external">https://github.com/ryanolsonk/LLDB-QuickLook</a></p>
<p>quicklook in xcode<br><a href="http://nshipster.com/quick-look-debugging/" target="_blank" rel="external">http://nshipster.com/quick-look-debugging/</a></p>
<h3 id="扩展LLDB命令"><a href="#扩展LLDB命令" class="headerlink" title="扩展LLDB命令"></a>扩展LLDB命令</h3><p>lldb的python接口文档<br><a href="http://lldb.llvm.org/python_reference/index.html" target="_blank" rel="external">http://lldb.llvm.org/python_reference/index.html</a></p>
<h3 id="chisel：Facebook的LLDB扩展"><a href="#chisel：Facebook的LLDB扩展" class="headerlink" title="chisel：Facebook的LLDB扩展"></a>chisel：Facebook的LLDB扩展</h3><pre><code>border self.view 
border --color green self.view 
</code></pre><p>让view透明 </p>
<pre><code>mask self.button 
</code></pre><p>让view从透明状态恢复 </p>
<pre><code>unmask self.button 
</code></pre><p>打印当前界面的layer tree </p>
<pre><code>pca 
</code></pre><p>打印当前界面的view 层级 </p>
<pre><code>pviews 
</code></pre><p>打印view的responder chain </p>
<pre><code>presponder self.view 
</code></pre><p>交互式查看view的层级树 </p>
<pre><code>vs self.view 
</code></pre><p>重绘当前界面 </p>
<pre><code>caflush 
</code></pre><p>快速闪烁view </p>
<pre><code>flicker self.view 
</code></pre><p>显示view </p>
<pre><code>show self.view 
</code></pre><p>隐藏view </p>
<pre><code>hide self.view 
</code></pre><p>打印class的继承树 </p>
<pre><code>pclass self.property 
</code></pre><p>截屏预览 </p>
<pre><code>visualize self.view 
</code></pre>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/28/罗曼波兰斯基/" itemprop="url">
                  罗曼波兰斯基
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-01-28T20:00:00+08:00" content="2017-01-28">
              2017-01-28
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/28/罗曼波兰斯基/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/28/罗曼波兰斯基/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>过年这几天看了一本波兰斯基的自传以及三部他的传记电影，加上之前看的一些他的电影，可以说对这个世界级导演有一个比较全面的了解，果然是个命运坎坷却又精彩纷呈的人物。</p>
<h3 id="童年的悲惨经历"><a href="#童年的悲惨经历" class="headerlink" title="童年的悲惨经历"></a>童年的悲惨经历</h3><p>波兰斯基的童年正好在二战时纳粹对犹太人迫害最为严重的时候，随着德国对波兰的入侵，波兰斯基一家惨遭不幸：还怀有身孕的母亲以及姐姐被纳粹枪毙，父亲被关入集中营，自己孤身一人辗转于亲友之间。我觉得这段童年时的悲惨经历是他后续放荡不羁的生活态度的一个促成原因。</p>
<h3 id="青年与电影"><a href="#青年与电影" class="headerlink" title="青年与电影"></a>青年与电影</h3><p>战后的波兰斯基痴迷于表演，迫于波兰当时的政治形势，在几度尝试考入表演系失败后，在朋友的推荐下成功考入了导演系，此后波兰斯基就开始了他的电影生涯。导演起初的发展并不怎么顺利，在《水中刀》被波兰电影界批评得体无完肤后，波兰斯基来到法国寻求发展。然而几年后莫名其妙地凭借《水中刀》突然获得好几个奖项，从此这位导演才进入到人们的视野中。</p>
<h3 id="爱情与婚姻"><a href="#爱情与婚姻" class="headerlink" title="爱情与婚姻"></a>爱情与婚姻</h3><p>波兰斯基的矮个子并不妨碍他获得女性的青睐。来到法国，事业起步后，波兰斯基凭借非凡的个人魅力以及艺术才能，身边的女人换了一波又一波，最终在拍摄《冷血惊魂》时成功“勾搭”上了莎伦.塔特，不久后两人就结婚。本是男才女貌（波兰斯基当时也挺帅气），应该幸福美满才对。然而，上天似乎还是不肯放过波兰斯基，怀有8个月身孕的莎伦惨死于一桩邪教谋杀案，这一打击让波兰斯基重回了童年的阴影了。不过，随着时间的流逝以及波兰斯基风流成性的生活习惯，最终在经历了娈童案之后，波兰斯基被迫逃往法国，并在那认识了艾纽曼儿.塞尼耶，这对有着30多年年龄差距的伴侣最终结婚生子，看来浪子波兰斯基最终也要回归家庭了。</p>
<h3 id="欣赏的电影"><a href="#欣赏的电影" class="headerlink" title="欣赏的电影"></a>欣赏的电影</h3><p>波兰斯基的生活曲折惊奇，他的电影也丝毫不逊色。反映二战的《钢琴家》，表现心理恐惧的《罗斯玛丽的婴儿》和《怪房客》，以及反映腐败的《唐人街》，每一部都是经典中的经典。波兰斯基的电影普遍偏于沉重和黑暗，联系到他的童年经历和婚姻，这不难理解，似乎波兰斯基始终相信人性本恶。80多高龄的波兰斯基还在坚持拍电影，2016过去了，真心希望波兰斯基能多活几年，多拍几部好电影。</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/21/个人信息系统/" itemprop="url">
                  个人信息系统
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-01-21T20:00:00+08:00" content="2017-01-21">
              2017-01-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/21/个人信息系统/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/21/个人信息系统/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在互联网行业工作了几年后，慢慢就形成了自己的一套信息收集和整理流程，今天就介绍了我对这套流程的理解和运用。</p>
<h2 id="什么是个人信息系统"><a href="#什么是个人信息系统" class="headerlink" title="什么是个人信息系统"></a>什么是个人信息系统</h2><p>现在企业都会有一个信息部门，通常这个部门会把整个公司的业务流程整理成一套IT自动化系统，提高公司整体的效率。我理解的个人信息系统也就是这么一套系统，能提高个人的生活、学习、工作效率。</p>
<h2 id="为什么需要个人信息系统"><a href="#为什么需要个人信息系统" class="headerlink" title="为什么需要个人信息系统"></a>为什么需要个人信息系统</h2><p>我们现在处于知识爆炸的时代，这点在互联网行业工作的人体会更为深刻，然而不是所有的信息对你而言都是有效信息，有些反而是有害的，因此过滤出对你，特别是对某个特定阶段的你而言具有价值的信息，就变得非常重要。个人信息系统就可以作为你的渔网，以价值量作为网格，筛选出你想要的信息并允许你做二次编辑，从而丰富和完善你已有的知识体系。</p>
<h2 id="怎么建立自己的信息系统"><a href="#怎么建立自己的信息系统" class="headerlink" title="怎么建立自己的信息系统"></a>怎么建立自己的信息系统</h2><p>就像刘未鹏仔《暗时间》里说的，没有一套完美的时间管理系统能适用于所有人，个人信息系统也是。下面要说的就是我自己的一套信息收集和整理系统。</p>
<p><img src="http://d.pr/i/XSGk+" alt=""></p>
<p>由提醒、来源、存储、笔记、总结组成。</p>
<p>主动的信息收集本身就是一个值得培养的习惯，台湾的文学大家李敖更是从小就有意识地收藏整理资料，而只要是习惯，就必须经历一段时间的培养，好的提醒工具能帮你更快地养成这个习惯。由于我一直用Fantastical 2作为日历工具，它的提醒功能足够用了。</p>
<p>信息来源渠道很多，渠道本身的筛选固然重要，然而，现在很多渠道上的内容重复度都很高，随便选几个不太冷门的APP，基本都能覆盖大部分信息。RSS工具作为信息聚合工具自然少不了，Mac平台上的Feedly、Reeder界面和体验还不错。<br>知乎的内容质量普遍来说高于普通的门户，同时以问题的方式组织更有针对性，同时我也挺喜欢即刻以主题订阅的方式推送你感兴趣的内容。豆瓣上一些猎奇的内容和旅行经历作为消遣也是不错的。高质量的微信公众号上的文章也不能落下，还有平时浏览网页时碰到好的文章。</p>
<p>以上这些信息来源基本都必须快速方便地存入一个地方，保证操作的低成本才更有利于习惯的养成。而Pocket作为老牌的“稍后阅读”APP，在各个信息渠道APP中都有集成，如果没有，也可以通过IFTTT等方式与Pocket关联起来，比如豆瓣（<a href="https://www.douban.com/note/266234206/" target="_blank" rel="external">IFTTT关联豆瓣和Pocket教程</a>）。</p>
<p>信息过滤到Pocket后，就可以抽时间阅读并作好笔记，我一般利用碎片化的时间阅读。我习惯把笔记放入Evernote。</p>
<p>Evernote只是一个笔记收集容器，它没有提供方便的工具来帮你把信息梳理组织成完整的层次化系统。MindNode作为思维导图能补充Evernote这方面的不足。把零散的笔记提炼总结形成系统的知识体系，这一步，是前面所有工作的最终目的和最有价值的部分。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上就是我的个人信息系统的简单介绍，在移动时代，这套系统基本只需要在手机上装几个APP以及利用碎片化时间就能建立起来，成本不高。在写这篇文章的同时找到知乎上的一篇不错的文章<a href="https://www.zhihu.com/question/23427617" target="_blank" rel="external">https://www.zhihu.com/question/23427617</a>，对建立个人信息系统也有帮助。</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/14/iOS framework 发布流程总结/" itemprop="url">
                  iOS framework 发布流程总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-01-14T20:00:00+08:00" content="2017-01-14">
              2017-01-14
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/14/iOS framework 发布流程总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/14/iOS framework 发布流程总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前总结了 <a href="http://liuyunclouder.github.io/2016/12/10/iOS%20framework%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E6%80%BB%E7%BB%93/" target="_blank" rel="external">iOS framework开发流程</a>，当然，开发完了还需要发布和更新版本，以便开发者能快速方便地使用。</p>
<h2 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a>包管理工具</h2><p>目前苹果生态下的包管理工具有：Cocoapods、Carthage、Swift Package Manager。Cocoapods是老牌的包管理工具，ruby写的，中心化包管理工具；Carthage是随着Swift的诞生出现的，swift写的，与Cocoapods不同，它是去中心化的；而Swift Package Manager，是苹果官方推出的Swift包管理工具，目前只支持OSX和macOS开发，包括Swift server开发的包管理。</p>
<p>因此，我们需要支持Cocoapods和Carthage。</p>
<h2 id="Cocoapods"><a href="#Cocoapods" class="headerlink" title="Cocoapods"></a>Cocoapods</h2><p>Cocoapods的framework发布流程有两种，一种是Cocoapods官方提供的 <a href="https://guides.cocoapods.org/making/using-pod-lib-create.html" target="_blank" rel="external">pod lib create</a>命令，优点是会自动生成framework发布工程，包含demo工程、测试框架以及符号重命名，缺点是必须把源码文件添加进去以便打framework。当你不想发布源码时，就得使用第二种方式：自己建framework发布工程。<br>1.在github上创建git仓库，目录结构：<br><img src="http://d.pr/i/3Kcg+" alt=""><br>2.生成podspec：进入新建的git仓库，执行以下命令</p>
<pre><code>pod spec create DTTracker
</code></pre><p>3.编辑新生成的podspec文件，添加必要的依赖和编译参数</p>
<pre><code>Pod::Spec.new do |s|


  s.name         = &quot;DTTracker&quot;
  s.version      = &quot;0.0.1&quot;
  s.summary      = &quot;DTTracker SDK&quot;

  s.description  = &quot;you can use DTTracker to track your user behavior in your app&quot;

  s.homepage     = &quot;https://www.dtstack.com/&quot;


  s.license      = &quot;MIT&quot;


  s.author       = { &quot;liuyunclouder&quot; =&gt; &quot;liuyunclouder@gmail.com&quot; }


  s.platform     = :ios, &quot;8.0&quot;



  s.source       = { :git =&gt; &quot;https://github.com/liuyunclouder/DTTracker.git&quot;, :tag =&gt; s.version }


  s.vendored_frameworks = &quot;frameworks/cocoapods/DTTracker.framework&quot;


  s.frameworks = &quot;Foundation&quot;, &quot;UIKit&quot;, &quot;CoreTelephony&quot;

  s.libraries = &quot;sqlite3&quot;, &quot;z&quot;

  s.requires_arc = true

  s.pod_target_xcconfig = { &quot;OTHER_LDFLAGS&quot; =&gt; &quot;-ObjC -all_load&quot; }

end
</code></pre><p>4.提交修改，打上tag，再次带上tag提交（tag要和podspec里的version匹配）<br>5.本地校验podspec：</p>
<pre><code>pod lib lint DTTracker.podspec —verbose
</code></pre><p>6.再次远程校验：</p>
<pre><code>pod spec lint DTTracker.podspec —verbose
</code></pre><p>7.推送到Cocoapods：</p>
<pre><code>pod trunk push DTTracker.podspec
</code></pre><p>8.验证是否推送成功：</p>
<pre><code>rm ~/Library/Caches/CocoaPods/search_index.json
pod search DTTracker
</code></pre><h2 id="Carthage"><a href="#Carthage" class="headerlink" title="Carthage"></a>Carthage</h2><p>Carthage目前只支持动态库，而在<a href="http://liuyunclouder.github.io/2016/12/10/iOS%20framework%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E6%80%BB%E7%BB%93/" target="_blank" rel="external">iOS framework开发流程</a>中，我们新建的framework是静态库，因此，我们需要新建一个framework工程：<br>1.创建Cocoa touch framework：DTTrackerForCarthage<br>2.添加valid architecture类型<br><img src="http://d.pr/i/ieCH+" alt=""><br>3.添加compile source(.m文件)和header文件<br><img src="http://d.pr/i/G1Aj+" alt=""><br>4.添加link库<br><img src="http://d.pr/i/OHPS+" alt=""><br>5.我们需要让生成的framework名称为DTTracker，而不是DTTrackerForCarthage，因此还需要修改framework名称<br><img src="http://d.pr/i/Y4dW+" alt=""><br>6.修改scheme为shared<br>7.生成framework：进入framework开发工程根目录，执行以下命令</p>
<pre><code>carthage build --no-skip-current
carthage archive DTTracker
</code></pre><p>8.找到生成的DTTrack.framework.zip文件，放入最开始我们创建的framework发布工程，这时我们的目录结构是这样的<br><img src="http://d.pr/i/6YZM+" alt=""><br>9.打tag，提交远程<br>10.创建 github release，提交DTTracker.framework.zip<br><img src="http://d.pr/i/QlL7+" alt=""></p>
<p>当然，每次还要打开命令行去执行carthage命令，显然是浪费时间，为节省时间同时也方便其它同事打framework，我们可以再添加一个aggregate target：<br><img src="http://d.pr/i/Mo3q+" alt=""></p>
<pre><code>set -e

carthage build --no-skip-current
carthage archive ${PROJECT_NAME}

mkdir -p &quot;${PROJECT_DIR}/frameworks/carthage&quot;

mv &quot;${PROJECT_DIR}/${PROJECT_NAME}.framework.zip&quot; &quot;${PROJECT_DIR}/frameworks/carthage&quot;
</code></pre><p>这样，每次我们只需要运行一下这个target对应的scheme就能生成我们需要的DTTracker.framework.zip文件<br><img src="http://d.pr/i/puCw+" alt=""></p>
<p>当然，目前的流程还可以再改进，我们可以再建一个target，修改framework开发工程的版本号后同时为Cocoapods和Carthage打包并copy到framework发布工程，然后修改podspec版本号并打好tag并提交。然而目前就我一个人开发，基本够用，有时间再弄。</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a href="https://guides.cocoapods.org/syntax/podspec.html" target="_blank" rel="external">https://guides.cocoapods.org/syntax/podspec.html</a></p>
<p><a href="https://github.com/Carthage/Carthage#supporting-carthage-for-your-framework" target="_blank" rel="external">https://github.com/Carthage/Carthage#supporting-carthage-for-your-framework</a></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpeg"
               alt="Ezio" />
          <p class="site-author-name" itemprop="name">Ezio</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">38</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ezio</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/libs/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/libs/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/libs/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/libs/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/libs/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/libs/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"githubliuyunclouder"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
